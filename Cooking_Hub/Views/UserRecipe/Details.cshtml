@using Cooking_Hub.Data;
@using Microsoft.AspNetCore.Identity;
@model Cooking_Hub.Models.Recipe
@inject UserManager<CookingHubUser> UserManager

    @*User*@
@{
    ViewData["Title"] = "Recipe Detials";
    ViewData["Title Description"] = "Recipe Detials Page";
    Layout = "~/Views/Shared/_Layout.cshtml";
    string userId = UserManager.GetUserId(User);
    string CommentssId = Guid.NewGuid().ToString();
    string Likedids = Guid.NewGuid().ToString();
    var ingredientData = ViewData["IngredientData"] as string;
    var nutritionData = ViewData["NutritionData"] as string;
}
<style>
    .raiting a.vote {
        color: #ffb300; /* Change this to the desired color */
    }

    .votes {
        color: #ffb300;
    }

    .b1:hover ~ a,
    .b2:hover ~ a,
    .b3:hover ~ a,
    .b4:hover ~ a {
        color: #ffb300;
    }
</style>
<section class="inner-page-banner bg-common" data-bg-image="~/img/figure/inner-page-banner1.jpg">
    <div class="container">
        <div class="row">
            <div class="col-12">
                <div class="breadcrumbs-area">
                    <h1 class="h1-overss">@ViewData["Title Description"]</h1>
                    <ul>
                        <li>
                            <a asp-controller="Home" asp-action="Index">Home</a>
                        </li>
                        <li>@ViewData["Title"]</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
</section>
<!-- Inne Page Banner Area End Here -->
<!-- Single Recipe With Sidebar Area Start Here -->
<section class="single-recipe-wrap-layout1 padding-top-74 padding-bottom-50">
    <div class="container">
        <div class="row gutters-60">
            <div class="col-lg-8">
                <div class="single-recipe-layout1">
                    <div class="ctg-name">@Model.Category.CategoryName</div>
                    <h2 class="item-title">@Model.RecipeTitle</h2>
                    <div class="row mb-4">
                        <div class="col-xl-9 col-12">
                            <ul class="entry-meta">
                                <li class="single-meta">
                                    <a href="#">
                                        <i class="far fa-calendar-alt"></i>@Model.CreatedAt
                                    </a>
                                </li>
                                <li class="single-meta">
                                    <a href="#">
                                        <i class="fas fa-user"></i>by <span>
                                          @Model.User.FirstName
                                          @Model.User.LastName
                                        </span>
                                    </a>
                                </li>
                                <li class="single-meta">
                                    <ul class="item-rating">
                                        <li class="star-fill"><i class="fas fa-star"></i></li>
                                        <li class="star-fill"><i class="fas fa-star"></i></li>
                                        <li class="star-fill"><i class="fas fa-star"></i></li>
                                        <li class="star-fill"><i class="fas fa-star"></i></li>
                                        <li class="star-empty"><i class="fas fa-star"></i></li>
                                        <li><span>9<span> / 10</span></span> </li>
                                    </ul>
                                </li>
                                <li class="single-meta">
                                    <a href="#">
                                        <i class="fas fa-heart"></i><span>@ViewBag.LikeCount</span>
                                        Likes
                                    </a>
                                </li>
                            </ul>
                        </div>
                        <div class="col-xl-3 col-12">
                            <ul class="action-item">
                                <li><button><i class="fas fa-print"></i></button></li>
                                <li><button><i class="fas fa-expand-arrows-alt"></i></button></li>
                                <li class="action-share-hover">
                                    <button><i class="fas fa-share-alt"></i></button>
                                    <div class="action-share-wrap">
                                        <a href="#" title="facebook"><i class="fab fa-facebook-f"></i></a>
                                        <a href="#" title="twitter"><i class="fab fa-twitter"></i></a>
                                        <a href="#" title="linkedin"><i class="fab fa-linkedin-in"></i></a>
                                        <a href="#" title="pinterest"><i class="fab fa-pinterest-p"></i></a>
                                        <a href="#" title="skype"><i class="fab fa-skype"></i></a>
                                        <a href="#" title="rss"><i class="fas fa-rss"></i></a>
                                    </div>
                                </li>
                            </ul>
                        </div>
                    </div>
                    <div class="item-figure">
                        <img src="~/UserImage/@Model.RecipeImage" alt="Product">
                    </div>
                    <div class="item-feature">
                        <ul>
                            <li>
                                <div class="feature-wrap">
                                    <div class="media">
                                        <div class="feature-icon">
                                            <i class="far fa-clock"></i>
                                        </div>
                                        <div class="media-body space-sm">
                                            <div class="feature-title">PREP TIME</div>
                                            <div class="feature-sub-title">@Model.PreparationTime</div>
                                        </div>
                                    </div>
                                </div>
                            </li>
                            <li>
                                <div class="feature-wrap">
                                    <div class="media">
                                        <div class="feature-icon">
                                            <i class="fas fa-utensils"></i>
                                        </div>
                                        <div class="media-body space-sm">
                                            <div class="feature-title">COOK TIME</div>
                                            <div class="feature-sub-title">@Model.CookingTime</div>
                                        </div>
                                    </div>
                                </div>
                            </li>
                            <li>
                                <div class="feature-wrap">
                                    <div class="media">
                                        <div class="feature-icon">
                                            <i class="fas fa-users"></i>
                                        </div>
                                        <div class="media-body space-sm">
                                            <div class="feature-title">SERVING</div>
                                            <div class="feature-sub-title">@Model.Serving</div>
                                        </div>
                                    </div>
                                </div>
                            </li>
                            <li>
                                <div class="feature-wrap">
                                    <div class="media">
                                        <div class="feature-icon">
                                            <i class="far fa-eye"></i>
                                        </div>
                                        <div class="media-body space-sm">
                                            <div class="feature-title">VIEWS</div>
                                            <div class="feature-sub-title">@Model.Views</div>
                                        </div>
                                    </div>
                                </div>
                            </li>
                        </ul>
                    </div>
                    <p class="item-description">
                        @Model.RecipeshortDescription
                       </p>
                    
                    <div class="making-elements-wrap">
                        <div class="row">
                            <div class="col-xl-6 col-12">
                                <div id="ingridients-wrap" class="ingridients-wrap">
                                    <h3 class="item-title"><i class="fas fa-list-ul"></i>Ingridients</h3>
                                    
                                    <div class="checkbox checkbox-primary">
                                        <input id="checkbox1" type="checkbox">
                                        <label for="checkbox1"><span></span>1 cup sifted all purpose flour</label>
                                    </div>
                                    <div class="checkbox checkbox-primary">
                                        <input id="checkbox2" type="checkbox">
                                        <label for="checkbox2"><span>4</span> cup roasted macadamia nuts</label>
                                    </div>
                                    
                                </div>
                            </div>
                            <div class="col-xl-6 col-12">
                                <div class="nutrition-wrap">
                                    <h3 class="item-title"><i class="fas fa-info"></i>Nutrition</h3>
                                    <ul class="nutrition-list">
                                        <li>
                                            <div class="nutrition-name">Calories</div>
                                            <div class="nutrition-value">329</div>
                                        </li>
                                        <li>
                                            <div class="nutrition-name">Sugar</div>
                                            <div class="nutrition-value">10.5g</div>
                                        </li>
                                        <li>
                                            <div class="nutrition-name">Protein</div>
                                            <div class="nutrition-value">22.5g</div>
                                        </li>
                                        <li>
                                            <div class="nutrition-name">Fat</div>
                                            <div class="nutrition-value">02g</div>
                                        </li>
                                        <li>
                                            <div class="nutrition-name">Carbs</div>
                                            <div class="nutrition-value">18g</div>
                                        </li>
                                        <li>
                                            <div class="nutrition-name">Food Fat</div>
                                            <div class="nutrition-value">0.1</div>
                                        </li>

                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                 
                    <div class="recipe-reviews">
                        <div class="section-heading heading-dark">
                            <h2 class="item-heading">RECIPE REVIEWS</h2>
                        </div>
                        <div class="avarage-rating-wrap">
                           
                            <div class="total-reviews">Total Reviews:<span class="review-number">(02)</span></div>
                        </div>
                        <ul>
                            @foreach (var comment in Model.RecipeReviews)
							{
                            <li class="reviews-single-item">
                                <div class="media media-none--xs">
                                        @if (string.IsNullOrEmpty(comment.User.ImageFilePath))
                                        {
                                            <img src="~/img/blog/author9.jpg" style="width: 93px;margin-top: 8px;
                                         margin-left: 8px;" alt="..." class="media-img-auto">
                                        }
                                        else
                                        {

                                            <img src="~/UserImage/@comment.User.ImageFilePath" style="width: 93px;margin-top: 8px;
                                         margin-left: 8px;" alt="Comment" class="media-img-auto">
                                        }  <div class="media-body">
                                            <h4 class="comment-title">@comment.User.FirstName @comment.User.LastName</h4>
                                            @{
                                                DateTime createdAtss = DateTime.Parse(Model.CreatedAt.ToString());
                                            }
                                            <span class="post-date">@createdAtss.ToString("dd MMMM, yyyy")</span>
                                        <p>
                                                @comment.ReviewContents
                                        </p>
                                            @for (int i = 1; i <= 5; i++)
                                            {
                                                <span class="fa fa-star c@(i) @(i <= comment.Rating ? "votes" : "")" aria-hidden="true"></span>
                                            }
                                        <a href="#" class="item-btn">REPLY<i class="fas fa-long-arrow-alt-right"></i></a>
                                    </div>
                                </div>
                            </li>
                          }
                        </ul>
                    </div>
                    <div class="leave-review">
                        <div class="section-heading heading-dark">
                            <h2 class="item-heading">LEAVE A REVIEW</h2>
                        </div>
                        <div class="rate-wrapper">
                            <div class="rate-label">Rating</div>
                            <div class="rate">
                                <div class="rate-item"><i class="fa fa-star" aria-hidden="true"></i></div>
                                <div class="rate-item"><i class="fa fa-star" aria-hidden="true"></i></div>
                                <div class="rate-item"><i class="fa fa-star" aria-hidden="true"></i></div>
                                <div class="rate-item"><i class="fa fa-star" aria-hidden="true"></i></div>
                                <div class="rate-item"><i class="fa fa-star" aria-hidden="true"></i></div>
                            </div>
                        </div>
                        <form class="leave-form-box">
                            <div class="row">
                                <div class="col-12 form-group">
                                    <label>Comment :</label>
                                    <textarea placeholder="" class="textarea form-control" name="message" rows="7"
                                              cols="20" data-error="Message field is required" required></textarea>
                                    <div class="help-block with-errors"></div>
                                </div>
                                <div class="col-lg-4 form-group">
                                    <label>Name :</label>
                                    <input type="text" placeholder="" class="form-control" name="name"
                                           data-error="Name field is required" required>
                                    <div class="help-block with-errors"></div>
                                </div>
                                <div class="col-lg-4 form-group">
                                    <label>E-mail :</label>
                                    <input type="email" placeholder="" class="form-control" name="email"
                                           data-error="E-mail field is required" required>
                                    <div class="help-block with-errors"></div>
                                </div>
                                <div class="col-lg-4 form-group">
                                    <label>Website :</label>
                                    <input type="email" placeholder="" class="form-control" name="email"
                                           data-error="E-mail field is required" required>
                                    <div class="help-block with-errors"></div>
                                </div>
                                <div class="col-12 form-group mb-0">
                                    <button type="submit" class="item-btn">POST REVIEW</button>
                                </div>
                            </div>
                            <div class="form-response"></div>
                        </form>
                    </div>
                </div>
            </div>
            <div class="col-lg-4 sidebar-widget-area sidebar-break-md">
                <div class="widget">
                    <div class="section-heading heading-dark">
                        <h3 class="item-heading">LATEST RECIPES</h3>
                    </div>
                    <div class="widget-latest">
                        <ul class="block-list">
                            <li class="single-item">
                                <div class="item-img">
                                    <a href="#"><img src="~/img/product/latest1.jpg" alt="Post"></a>
                                    <div class="count-number">1</div>
                                </div>
                                <div class="item-content">
                                    <div class="item-ctg">DESERT</div>
                                    <h4 class="item-title">
                                        <a href="#">
                                            Salami Oven Roasted are
                                            Mozzarella Oelette
                                        </a>
                                    </h4>
                                    <div class="item-post-by">
                                        <a href="single-blog.html">
                                            <i class="fas fa-user"></i><span>by</span>
                                            John Martin
                                        </a>
                                    </div>
                                </div>
                            </li>
                            <li class="single-item">
                                <div class="item-img">
                                    <a href="#"><img src="~/img/product/latest2.jpg" alt="Post"></a>
                                    <div class="count-number">2</div>
                                </div>
                                <div class="item-content">
                                    <div class="item-ctg">DESERT</div>
                                    <h4 class="item-title">
                                        <a href="#">
                                            Salami Oven Roasted are
                                            Mozzarella Oelette
                                        </a>
                                    </h4>
                                    <div class="item-post-by">
                                        <a href="single-blog.html">
                                            <i class="fas fa-user"></i><span>by</span>
                                            John Martin
                                        </a>
                                    </div>
                                </div>
                            </li>
                            <li class="single-item">
                                <div class="item-img">
                                    <a href="#"><img src="~/img/product/latest3.jpg" alt="Post"></a>
                                    <div class="count-number">3</div>
                                </div>
                                <div class="item-content">
                                    <div class="item-ctg">DESERT</div>
                                    <h4 class="item-title">
                                        <a href="#">
                                            Salami Oven Roasted are
                                            Mozzarella Oelette
                                        </a>
                                    </h4>
                                    <div class="item-post-by">
                                        <a href="single-blog.html">
                                            <i class="fas fa-user"></i><span>by</span>
                                            John Martin
                                        </a>
                                    </div>
                                </div>
                            </li>
                            <li class="single-item">
                                <div class="item-img">
                                    <a href="#"><img src="~/img/product/latest4.jpg" alt="Post"></a>
                                    <div class="count-number">4</div>
                                </div>
                                <div class="item-content">
                                    <div class="item-ctg">DESERT</div>
                                    <h4 class="item-title">
                                        <a href="#">
                                            Salami Oven Roasted are
                                            Mozzarella Oelette
                                        </a>
                                    </h4>
                                    <div class="item-post-by">
                                        <a href="single-blog.html">
                                            <i class="fas fa-user"></i><span>by</span>
                                            John Martin
                                        </a>
                                    </div>
                                </div>
                            </li>
                        </ul>
                    </div>
                </div>
                <div class="widget">
                    <div class="section-heading heading-dark">
                        <h3 class="item-heading">SUBSCRIBE &amp; FOLLOW</h3>
                    </div>
                    <div class="widget-follow-us">
                        <ul>
                            <li class="single-item"><a href="#"><i class="fab fa-facebook-f"></i>LIKE ME ON</a></li>
                            <li class="single-item"><a href="#"><i class="fab fa-twitter"></i>LIKE ME</a></li>
                            <li class="single-item"><a href="#"><i class="fab fa-linkedin-in"></i>LIKE ME</a></li>
                            <li class="single-item"><a href="#"><i class="fab fa-pinterest-p"></i>LIKE ME</a></li>
                            <li class="single-item"><a href="#"><i class="fab fa-instagram"></i>LIKE ME</a></li>
                            <li class="single-item"><a href="#"><i class="fab fa-youtube"></i>Subscribe</a></li>
                        </ul>
                    </div>
                </div>
                <div class="widget">
                    <div class="widget-ad">
                        <a href="#"><img src="~/img/figure/figure4.jpg" alt="Ad" class="img-fluid"></a>
                    </div>
                </div>
                <div class="widget">
                    <div class="section-heading heading-dark">
                        <h3 class="item-heading">FEATURED ARTICLE</h3>
                    </div>
                    <div class="widget-featured-feed">
                        <div class="rc-carousel nav-control-layout1" data-loop="true" data-items="3"
                             data-margin="5" data-autoplay="true" data-autoplay-timeout="5000" data-smart-speed="700"
                             data-dots="false" data-nav="true" data-nav-speed="false" data-r-x-small="1"
                             data-r-x-small-nav="true" data-r-x-small-dots="false" data-r-x-medium="1"
                             data-r-x-medium-nav="true" data-r-x-medium-dots="false" data-r-small="1"
                             data-r-small-nav="true" data-r-small-dots="false" data-r-medium="1"
                             data-r-medium-nav="true" data-r-medium-dots="false" data-r-large="1"
                             data-r-large-nav="true" data-r-large-dots="false" data-r-extra-large="1"
                             data-r-extra-large-nav="true" data-r-extra-large-dots="false">
                            <div class="featured-box-layout1">
                                <div class="item-img">
                                    <img src="~/img/product/product17.jpg" alt="Brand" class="img-fluid">
                                </div>
                                <div class="item-content">
                                    <span class="ctg-name">BREAKFAST</span>
                                    <h4 class="item-title"><a href="single-recipe1.html">Baked Garlic Prawn</a></h4>
                                    <p>
                                        Definitiones noel ei verear intelle
                                        gatpri civibus consequat area
                                        refund efficiantue.
                                    </p>
                                </div>
                            </div>
                            <div class="featured-box-layout1">
                                <div class="item-img">
                                    <img src="~/img/product/product18.jpg" alt="Brand" class="img-fluid">
                                </div>
                                <div class="item-content">
                                    <span class="ctg-name">DINNER</span>
                                    <h4 class="item-title"><a href="single-recipe1.html">Baked Garlic Prawn</a></h4>
                                    <p>
                                        Definitiones noel ei verear intelle
                                        gatpri civibus consequat area
                                        refund efficiantue.
                                    </p>
                                </div>
                            </div>
                            <div class="featured-box-layout1">
                                <div class="item-img">
                                    <img src="~/img/product/product19.jpg" alt="Brand" class="img-fluid">
                                </div>
                                <div class="item-content">
                                    <span class="ctg-name">SALAD</span>
                                    <h4 class="item-title"><a href="single-recipe1.html">Baked Garlic Prawn</a></h4>
                                    <p>
                                        Definitiones noel ei verear intelle
                                        gatpri civibus consequat area
                                        refund efficiantue.
                                    </p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="widget">
                    <div class="widget-newsletter-subscribe">
                        <h3>GET LATEST UPDATES</h3>
                        <p>Newsletter Subscribe</p>
                        <form class="newsletter-subscribe-form">
                            <div class="form-group">
                                <input type="text" placeholder="your e-mail address" class="form-control" name="email"
                                       data-error="E-mail field is required" required>
                                <div class="help-block with-errors"></div>
                            </div>
                            <div class="form-group mb-none">
                                <button type="submit" class="item-btn">SUBSCRIBE</button>
                            </div>
                        </form>
                    </div>
                </div>
                <div class="widget">
                    <div class="section-heading heading-dark">
                        <h3 class="item-heading">CATEGORIES</h3>
                    </div>
                    <div class="widget-categories">
                        <ul>
                            <li>
                                <a href="#">
                                    BreakFast
                                    <span>25</span>
                                </a>
                            </li>
                            <li>
                                <a href="#">
                                    Lunch
                                    <span>15</span>
                                </a>
                            </li>
                            <li>
                                <a href="#">
                                    Pasta
                                    <span>22</span>
                                </a>
                            </li>
                            <li>
                                <a href="#">
                                    Dinner
                                    <span>18</span>
                                </a>
                            </li>
                            <li>
                                <a href="#">
                                    Dessert
                                    <span>36</span>
                                </a>
                            </li>
                            <li>
                                <a href="#">
                                    Drinks
                                    <span>12</span>
                                </a>
                            </li>
                            <li>
                                <a href="#">
                                    Fruits
                                    <span>05</span>
                                </a>
                            </li>
                        </ul>
                    </div>
                </div>
                <div class="widget">
                    <div class="section-heading heading-dark">
                        <h3 class="item-heading">POPULAR TAGS</h3>
                    </div>
                    <div class="widget-tag">
                        <ul>
                            <li>
                                <a href="#">DESERT</a>
                            </li>
                            <li>
                                <a href="#">CAKE</a>
                            </li>
                            <li>
                                <a href="#">BREAKFAST</a>
                            </li>
                            <li>
                                <a href="#">BURGER</a>
                            </li>
                            <li>
                                <a href="#">DINNER</a>
                            </li>
                            <li>
                                <a href="#">PIZZA</a>
                            </li>
                            <li>
                                <a href="#">SEA FOOD</a>
                            </li>
                            <li>
                                <a href="#">SALAD</a>
                            </li>
                            <li>
                                <a href="#">JUICE</a>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
@section Scripts {
    <script>
        let selectedVote = 0;

        function addVote(vote) {
            const voteElement = document.getElementById("vote");
            const ratingInput = document.querySelector("input[name='Rating']");

            // Toggle the selected state of the stars
            if (selectedVote === vote) {
                selectedVote = 0;
            } else {
                selectedVote = vote;
            }

            voteElement.textContent = selectedVote;
            ratingInput.value = selectedVote;

            // Remove existing class from all stars
            const stars = document.querySelectorAll(".raiting a");
            stars.forEach((star) => {
                star.classList.remove("vote");
            });

            // Add 'vote' class to selected stars
            for (let i = 1; i <= selectedVote; i++) {
                const star = document.querySelector(`.c${i}`);
                star.classList.add("vote");
            }
        }
    <script>
       console.log("1")
        var ingredientData = @Html.Raw(ViewData["IngredientData"] as string);

        // Populate Ingredients
        var ingredientContainer = $('#ingridients-wrap');
        /*ingredientContainer.empty();*/ // Clear existing fields

        $.each(ingredientData, function (index, ingredient) {
            var checkboxDiv = $('<div class="checkbox checkbox-primary"></div>');
            var checkboxInput = $('<input type ="checkbox">');
            checkboxInput.attr('id', 'checkbox' + (index + 1));
            var checkboxLabel = $('<label></label>');
            checkboxLabel.attr('for', 'checkbox' + (index + 1));
            checkboxLabel.text(ingredient.ingrename);

            checkboxDiv.append(checkboxInput);
            checkboxDiv.append(checkboxLabel);

            ingredientContainer.append(checkboxDiv);
            console.log("hello")
        });
    </script>

}
